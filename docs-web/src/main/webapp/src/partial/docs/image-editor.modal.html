<div class="modal-header">
  <h3 class="modal-title">图片编辑</h3>
</div>
  
<div class="modal-body">
  <!-- 画布容器 -->
  <div style="position: relative;">
    <canvas id="canvas-editor"></canvas>
    <img id="imageToEdit"
         ng-src="{{imageUrl}}"
         ng-if="imageUrl"
         onload="angular.element(this).scope().onLoad()"
         alt="待编辑图片"
         style="display:none;">
  </div>

  <!-- 工具栏 -->
  <div class="image-editor-actions mt-3 text-left">
    <button class="btn btn-outline-success mr-2" ng-click="enableCrop()">📐 剪裁</button>
    <button class="btn btn-outline-primary mr-2" ng-click="rotateImage()">🔄 旋转</button>
    <button class="btn btn-outline-secondary mr-2" ng-click="enablePencil()">✏ 绘画</button>
    <button class="btn btn-secondary mr-2" ng-click="downloadImage()">💾 保存到本地</button>
    <button class="btn btn-primary mr-2" ng-click="saveImage()">✅ 保存修改</button>
    <button class="btn btn-outline-secondary" ng-click="cancel()">❌ 取消</button>
  </div>
  <div class="drawing-tools" ng-if="fabricCanvas">
    <label>颜色：
      <input type="color" ng-model="color" ng-change="updateBrush(color, -1)">
    </label>
    <label>粗细：
      <input type="range" min="1" max="10" ng-model="brushWidth" ng-change="updateBrush(-1, brushWidth)">
    </label>
  </div>
</div>
